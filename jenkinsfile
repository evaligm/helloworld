pipeline {
	agent any
	tools {maven 'Maven 3.8.1'} 

   stages {

      def app
      stage ('Clone repository') {checkout scm }

      stage('Maven Build') { 
           steps  {  sh "mvn clean install package"  }
          } // end stage


      stage('Push jar file to Nexus') {
         steps {   nexusArtifactUploader artifacts: [[artifactId: 'helloworldid', classifier: '', file: 'target/HelloWorld-0.0.1-SNAPSHOT.jar', type: 'jar'] credentialsId: 'admin', groupId: 'helloworldgp', nexusUrl: 'localhost:8081/nexus', nexusVersion: 'nexus3', protocol: 'http'  }
          } // end stage
  

      stage('Docker Image Build') {
          steps {   app = docker.build("evaligm/helloworld")  }
          } // end stage


      }  // end stages
   }  //end pipeline
